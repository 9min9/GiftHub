<!DOCTYPE html>
<html class="no-js" lang="ko">
<head>
    <th:block th:replace="fragments/base/head :: head"></th:block>
    <style>
        .product-selector-container {
            display: inline-block;
            margin-right: 20px;
        }

        .product-selector {
            height: 80px;
            width: 80px;
            border-radius: 50%;
            background-color: #a0a0a0;
            color: white;
            display: inline-block;
            cursor: pointer;
            transition: border 0.3s;
        }

        .product-name {
            font-size: small;
        }

        .category-active .product-selector {
            border: red 2px solid;
        }

        #product-area-div {
            min-height: 100vh;
        }

    </style>
</head>
<body class="config">
<div class="preloader is-active">
    <div class="preloader__wrap">

        <img class="preloader__img" src="images/preloader.png" alt=""></div>
</div>

<!--====== Main App ======-->
<div id="app">
    <!--====== Main Header ======-->
    <header class="header--style-1 header--box-shadow">
        <th:block th:replace="fragments/base/header :: header"></th:block>
    </header>
    <!--====== End - Main Header ======-->

    <!--====== App Content ======-->
    <div class="app-content">
        <!--====== Section 2 ======-->
        <div class="u-s-p-y-60">
            <!--====== Section Intro ======-->
            <div class="section__intro u-s-m-b-16">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="section__text-wrap" id="product-selectors">
                                <h1 class="section__heading u-c-secondary u-s-m-b-12">판매중인 전체 기프티콘</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--====== End - Section Intro ======-->
        </div>
        <!--====== End - Section 2 ======-->

        <!--====== Section 3 ======-->
        <div class="u-s-p-y-60">
            <!--====== Section Content ======-->
            <div class="section__content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">

                            <div class="filter-category-container" id="filter-category-container">
                                <div class="filter__category-wrapper">

                                    <button class="btn filter__btn filter__btn--style-1 js-checked brand-filter total-filter" type="button"
                                            data-filter="*">전체
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--====== End - Section Content ======-->
            <!--====== Section Content ======-->
            <div class="section__content" id="product-area-div">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="<!--filter__grid-wrapper--> u-s-m-t-30">
                                <div id="row-product-div" class="row">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--====== End - Section Content ======-->
        </div>
        <!--====== End - Section 3 ======-->

    </div>
    <!--====== End - App Content ======-->

    <!--====== Main Footer ======-->
    <footer>
        <th:block th:replace="fragments/base/footer :: footer"></th:block>
    </footer>

    <!--====== Modal Section ======-->


    <!--====== End - Modal Section ======-->
</div>
<!--====== End - Main App ======-->

<th:block th:replace="fragments/base/script :: script"></th:block>
<script src="/js/gifticon/kakao-chatbot.js"></script>
<script src="/js/gifticon/file-add.js"></script>
<script src="/js/gifticon/list.js"></script>
<script src="/js/gifticon/product-selector.js"></script>
<script th:inline="javascript">
    window.onload = function() {
        createProductSpan("전체", "all", true);
        createProductSpan("카페", "cafe");
        createProductSpan("베이커리/도넛", "bakery-donut");
        createProductSpan("백화점/마트", "department-mart");
        createProductSpan("아이스크림", "icecream");
        createProductSpan("편의점", "convenient");
        createProductSpan("버거/피자", "burger-pizza");
        createProductSpan("치킨", "chicken");
        createProductSpan("외식/분식/배달", "outside");
        createBreak();
        createProductSpan("구이/족발", "roast-porkfeet");
        createProductSpan("레스토랑/뷔페", "restaurant-buffet");
        createProductSpan("기타", "etc");
        createProductSpan("영화/음악/도서", "movie-music-books");
        createProductSpan("주유권", "oil");
        createProductSpan("뷰티/헤어/바디", "beauty-hair-body");
        createProductSpan("건강/리빙/식품관", "health-living-foods");
        createProductSpan("생활/가전/엔터", "life-electronic-entertain");

        getPurchasingGifticon([[${param.page}]], [[${param.size}]]);

        setProductSelectorEvent();

        getTotalProducts();

        totalFilterEvent();

        totalCategoryEvent();

        const is = new IntersectionObserver((entries, observer) => {
            let page = 0;

            if (!entry.isIntersecting) return;

            let element = document.querySelector("#row-product-div:nth-last-child(6)");
            observer.observe(element);
            observer.unobserve(element);

            getPurchasingGifticon(page++, [[${param.size}]], document.querySelector(".category-active").innerText);
        });
    }
</script>


</body>
</html>